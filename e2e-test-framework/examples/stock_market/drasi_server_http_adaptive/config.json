{
  "data_store": {
      "data_store_path": "examples/stock_market/drasi_server_http_adaptive/test_data_cache",
      "delete_on_start": true,
      "delete_on_stop": true,
      "test_repos": [
          {
              "id": "drasi_server_dev_repo",
              "kind": "LocalStorage",
              "source_path": "examples/stock_market/drasi_server_http_adaptive/dev_repo",
              "local_tests": [
                {
                    "test_id": "stock_market",
                    "version": 1,
                    "description": "Stock market trading test with adaptive HTTP batching to external Drasi Server",
                    "test_folder": "stock_market",
                    "queries": [],
                    "sources": [
                        {
                        "test_source_id": "stock-trades-db",
                        "kind": "Model",
                        "source_change_dispatchers": [ 
                            {
                            "kind": "Http",
                            "url": "http://localhost",
                            "port": 9000,
                            "timeout_seconds": 60,
                            "batch_events": true,
                            "adaptive_enabled": true,
                            "batch_size": 100,
                            "batch_timeout_ms": 500
                            }
                        ],
                        "model_data_generator": {
                            "kind": "StockTrade",
                            "stock_definitions": [
                                {
                                    "symbol": "MSFT",
                                    "name": "Microsoft Corporation"
                                },
                                {
                                    "symbol": "AAPL",
                                    "name": "Apple Inc."
                                },
                                {
                                    "symbol": "GOOGL",
                                    "name": "Alphabet Inc."
                                },
                                {
                                    "symbol": "AMZN",
                                    "name": "Amazon.com Inc."
                                },
                                {
                                    "symbol": "NVDA",
                                    "name": "NVIDIA Corporation"
                                },
                                {
                                    "symbol": "TSLA",
                                    "name": "Tesla Inc."
                                },
                                {
                                    "symbol": "META",
                                    "name": "Meta Platforms Inc."
                                },
                                {
                                    "symbol": "BRK.B",
                                    "name": "Berkshire Hathaway Inc."
                                },
                                {
                                    "symbol": "V",
                                    "name": "Visa Inc."
                                },
                                {
                                    "symbol": "JPM",
                                    "name": "JPMorgan Chase & Co."
                                }
                            ],
                            "price_init": [150.0, 50.0],
                            "price_change": [0.5, 2.0],
                            "price_momentum": [5, 2.0, 0.3],
                            "price_range": [10.0, 5000.0],
                            "volume_init": [10000000, 5000000.0],
                            "volume_change": [100000, 50000.0],
                            "volume_momentum": [3, 1.5, 0.4],
                            "volume_range": [1000, 100000000],
                            "change_count": 100000,
                            "change_interval": [1000000000, 100000000, 100000000, 1000000000],
                            "spacing_mode": "none",
                            "time_mode": "2025-01-03T10:03:15.4Z",
                            "seed": 123456789,
                            "send_initial_inserts": true
                        },
                        "subscribers": []
                        }
                    ],
                    "reactions": [
                        {
                        "test_reaction_id": "stock-market-alerts",
                        "output_handler": {
                            "kind": "Http",
                            "port": 8081,
                            "path": "/reaction",
                            "correlation_header": "X-Query-Sequence"
                        },
                        "stop_triggers": [
                            {
                            "kind": "RecordCount",
                            "record_count": 100000
                            }
                        ]
                        }
                    ]
                    }
              ]
          }                    
      ]
  },
  "test_run_host": {
      "test_runs": [
          {
              "test_id": "stock_market",
              "test_repo_id": "drasi_server_dev_repo",
              "test_run_id": "test_run_001",
              "queries": [],
              "reactions": [
                  {
                      "test_reaction_id": "stock-market-alerts",
                      "start_immediately": true,
                      "output_loggers": [
                          {
                              "kind": "JsonlFile",
                              "max_lines_per_file": 15000
                          },
                          {
                              "kind": "PerformanceMetrics"
                          }
                      ]
                  }
              ],
              "sources": [
                  {
                      "test_source_id": "stock-trades-db",
                      "start_mode": "auto",
                      "test_run_overrides" : {
                        "model_data_generator": {}              
                      }
                  }
              ]
          }
      ]
  }
}