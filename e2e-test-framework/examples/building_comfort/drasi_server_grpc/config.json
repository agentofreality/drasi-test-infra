{
  "data_store": {
      "data_store_path": "examples/building_comfort/drasi_server_grpc/test_data_cache",
      "delete_on_start": true,
      "delete_on_stop": true,
      "test_repos": [
          {
              "id": "drasi_server_dev_repo",
              "kind": "LocalStorage",
              "source_path": "examples/building_comfort/drasi_server_grpc/dev_repo",
              "local_tests": [ 
                  {
                      "test_id": "building_comfort",
                      "version": 1,
                      "description": "",
                      "test_folder": "building_comfort",
                      "queries": [],
                      "sources": [
                        {
                          "test_source_id": "facilities-db",
                          "kind": "Model",
                          "source_change_dispatchers": [ 
                            {
                              "kind": "Grpc",
                              "host": "localhost",
                              "port": 50051,
                              "timeout_seconds": 60,
                              "batch_events": true,
                              "tls": false,
                              "source_id": "facilities-db"
                            },
                            {
                              "kind": "JsonlFile",
                              "max_lines_per_file": 15000
                            }
                          ],
                          "model_data_generator": {
                            "kind": "BuildingHierarchy",
                            "change_interval": [2000000000, 500000000, 500000000, 4000000000],
                            "change_count": 100000,
                            "seed": 123456789,
                            "spacing_mode": "none",
                            "time_mode": "2025-01-03T10:03:15.4Z",
                            "building_count": [1, 0],
                            "floor_count": [1, 0],
                            "room_count": [1, 0],                   
                            "room_sensors": [
                                {
                                    "kind": "NormalFloat",
                                    "id": "temperature",
                                    "momentum_init": [5, 1, 0.5],
                                    "value_change": [1, 0],
                                    "value_init": [5000, 0],
                                    "value_range": [0, 10000]
                                },
                                {
                                    "kind": "NormalFloat",
                                    "id": "co2",
                                    "momentum_init": [10, 1, 0.5],
                                    "value_change": [1, 0],
                                    "value_init": [5000, 0],
                                    "value_range": [0, 10000]
                                },
                                {
                                    "kind": "NormalFloat",
                                    "id": "humidity",
                                    "momentum_init": [5, 1, 0.5],
                                    "value_change": [1, 0],
                                    "value_init": [5000, 0],
                                    "value_range": [0, 10000]
                                }
                            ]
                          },
                          "subscribers": [
                            { "node_id": "default", "query_id": "building-comfort" }
                          ]
                        }
                      ],
                      "reactions": [
                        {
                          "test_reaction_id": "building-comfort",
                          "output_handler": {
                            "kind": "Grpc",
                            "host": "0.0.0.0",
                            "port": 50052,
                            "correlation_metadata_key": "x-query-sequence",
                            "query_ids": ["building-comfort"],
                            "include_initial_state": false
                          },
                          "stop_triggers": [
                            {
                              "kind": "RecordCount",
                              "record_count": 100000
                            }
                          ]
                        }
                      ]
                    }                 
              ]
          }                    
      ]
  },
  "test_run_host": {
      "test_runs": [
          {
              "test_id": "building_comfort",
              "test_repo_id": "drasi_server_dev_repo",
              "test_run_id": "test_run_001",
              "queries": [],
              "reactions": [
                  {
                      "test_reaction_id": "building-comfort",
                      "start_immediately": true,
                      "output_loggers": [
                          {
                              "kind": "JsonlFile",
                              "max_lines_per_file": 15000
                          },
                          {
                              "kind": "PerformanceMetrics"
                          }
                      ]
                  }
              ],
              "sources": [
                  {
                      "test_source_id": "facilities-db",
                      "start_mode": "auto",
                      "test_run_overrides" : {
                        "model_data_generator": {}              
                      }
                  }
              ]
          }
      ]
  }
}